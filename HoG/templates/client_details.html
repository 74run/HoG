<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Heaven of Grace</title>
    <style>
        /* Basic CSS for layout and styling */
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            margin: 0;
            padding: 0;
        }

        .navbar {
            background-color: white;
            overflow: hidden;
        }
        
        .navbar-logo {
            float: left;
            padding: 10px 15px;
        }
        
        .navbar-logo img {
            height: 80px;
            width: auto;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            background-color: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            position: relative; /* Ensure relative positioning for absolute elements */
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .search-bar {
            margin-bottom: 20px;
        }

        .search-bar input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }

        .table-container {
            overflow-x: auto;
            overflow-y: auto;
            max-height: 500px; /* Adjust max-height as needed */
        }

        table {
            width: 100%;
            border-collapse: collapse;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            white-space: nowrap; /* Prevent text wrapping */
        }

        th {
            background-color: #333;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        tr:hover {
            background-color: #ddd;
        }

        .delete-button {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 8px 12px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            border-radius: 4px;
            cursor: pointer;
        }

        .edit-button {
            background-color: blue;
            color: white;
            border: none;
            padding: 8px 12px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            border-radius: 4px;
            cursor: pointer;
        }

        .delete-button:hover {
            background-color: #d32f2f;
        }

        .back-to-form-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            border-radius: 4px;
            cursor: pointer;
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .back-to-form-button:hover {
            background-color: #45a049;
        }

        .company-logo {
            position: absolute;
            top: 20px;
            left: 20px;
        }

        .company-logo img {
            height: 60px; /* Adjust the height as needed */
            width: auto;
        }

        /* Modal styling */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        
        /* Modal Content/Box */
        .modal-content {
            position: fixed; /* Fixed position */
            background-color: #fefefe;
            top: 50%; /* Center vertically */
            left: 50%; /* Center horizontally */
            transform: translate(-50%, -50%); /* Center the modal */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* Could be more or less, depending on screen size */
            max-width: 600px;
            max-height: 80%; /* Maximum height */
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            overflow-y: auto; /* Make content scrollable */
            animation: fadeIn 0.5s;
        }

        /* Add animation for modal */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* The Close Button */
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* Form styling */
        form {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-top: 10px;
        }

        input, select, button {
            padding: 10px;
            margin-top: 5px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 20px;
        }

        button:hover {
            background-color: #45a049;
        }

        h2 {
            margin-bottom: 20px;
            color: #333;
            font-family: 'Arial', sans-serif;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="navbar-logo">
            <img src="./static/HoG.PNG" alt="Logo">
        </div>
    </div>

    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>Client Details</h1>
        
        </div>
        <div class="search-bar">
            <input type="text" id="searchInput" onkeyup="searchTable()" placeholder="Search for clients..">
        </div>
        
        <!-- First table for Demographics Form 1 -->
        <h2>Client Demographics Table</h2>
        <div class="table-container">
            <table class="client-table" id="clientTable">
                <thead>
                    <tr>
                        <th>User ID</th>
                        <th>Date of Entry</th>
                        <th>Date of Exit</th>
                        <th>Name</th>
                        <th>Address</th>
                        <th>Zip Code</th>
                        <th>Phone</th>
                        <th>Birthdate</th>
                        <th>Age</th>
                        <th>Sex</th>
                        <th>Race</th>
                        <th>Ethnicity</th>
                        <th>Marital Status</th>
                        <th>Length of Stay at Previous Address</th>
                        <th>Country of Origin</th>
                        <th>Times in Shelter</th>
                        <th>Length of Stay at Previous Shelter</th>
                        <th>Number of Children</th>
                        <th>Children</th> 
                        <th>Education Level</th>
                        <th>Employment Status</th>
                        <th>Income Amount at Intake</th>
                        <th>Income Source at Intake</th>
                        <th>Income Amount at Exit</th>
                        <th>Income 1 Year from Exit</th>
                        <th>Weeks Pregnant</th>
                        <th>Prenatal Care Prior to Intake</th>
                        <th>Father Involvement</th>
                        <th>Father's Education Level</th>
                        <th>Father's Occupation</th>
                        <th>Father's Income</th>
                        <th>Domestic Violence Survivor</th>
                        <th>Veteran Status</th>
                        <th>High BP</th>
                        <th>Diabetes</th>
                        <th>Type of Diabetes</th>
                        <th>Heart Disease</th>
                        <th>Live Births</th>
                        <th>Miscarriages</th>
                        <th>Disability Diagnosis</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr data-id="{{ user._id }}">
                        <td>{{ user.demographics_form1.user_id }}</td>
                        <td>{{ user.demographics_form1.date_of_entry }}</td>
                        <td>{{ user.demographics_form1.date_of_exit }}</td>
                        <td>{{ user.demographics_form1.name }}</td>
                        <td>{{ user.demographics_form1.address }}</td>
                        <td>{{ user.demographics_form1.zip_code }}</td>
                        <td>{{ user.demographics_form1.phone }}</td>
                        <td>{{ user.demographics_form1.birthdate }}</td>
                        <td>{{ user.demographics_form1.age }}</td>
                        <td>{{ user.demographics_form1.sex }}</td>
                        <td>{{ user.demographics_form1.race }}</td>
                        <td>{{ user.demographics_form1.ethnicity }}</td>
                        <td>{{ user.demographics_form1.marital_status }}</td>
                        <td>{{ user.demographics_form1.length_stay_previous_address }}</td>
                        <td>{{ user.demographics_form1.country_of_origin }}</td>
                        <td>{{ user.demographics_form1.times_in_shelter }}</td>
                        <td>{{ user.demographics_form1.length_stay_previous_shelter }}</td>
                        <td>{{ user.demographics_form1.number_of_children }}</td>
                        <td>
                            <ul>
                                {% for child in user.demographics_form1.children %}
                                <li>{{ child.name }} (DOB: {{ child.date_of_birth }})</li>
                                {% endfor %}
                            </ul>
                        </td>
                        <td>{{ user.demographics_form1.education_level }}</td>
                        <td>{{ user.demographics_form1.employment_status }}</td>
                        <td>{{ user.demographics_form1.income_amount_intake }}</td>
                        <td>{{ user.demographics_form1.income_source_intake }}</td>
                        <td>{{ user.demographics_form1.income_amount_exit }}</td>
                        <td>{{ user.demographics_form1.income_1_year_exit }}</td>
                        <td>{{ user.demographics_form1.weeks_pregnant }}</td>
                        <td>{{ user.demographics_form1.prenatal_care_prior_intake }}</td>
                        <td>{{ user.demographics_form1.father_involvement }}</td>
                        <td>{{ user.demographics_form1.father_education_level }}</td>
                        <td>{{ user.demographics_form1.father_occupation }}</td>
                        <td>{{ user.demographics_form1.father_income }}</td>
                        <td>{{ user.demographics_form1.domestic_violence_survivor }}</td>
                        <td>{{ user.demographics_form1.veteran_status }}</td>
                        <td>{{ user.demographics_form1.highbp }}</td>
                        <td>{{ user.demographics_form1.diabetes }}</td>
                        <td>{{ user.demographics_form1.typeofdiabetes }}</td>
                        <td>{{ user.demographics_form1.heartdisease }}</td>
                        <td>{{ user.demographics_form1.livebirths }}</td>
                        <td>{{ user.demographics_form1.miscarriages }}</td>
                        <td>{{ user.demographics_form1.diagdisabilty }}</td>
                        <td>
                            <button class="edit-button" data-id="{{ user._id }}" onclick="openEditForm(this)">Edit</button>
                            <button class="delete-button" onclick="openDeleteModal('{{ user._id }}')">Delete</button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Second table for Demographics Form 2 -->
        <h2>Maternal Information Table</h2>
        <div class="table-container">
            <table class="form2_table" id="form2Table">
                <thead>
                    <tr>
                        <th>User ID</th>
                        <th>Rehospitalization</th>
                        <th>Reson for Rehospitalization</th>
                        <th>Date of Rehospitalization</th>
                        <th>Doula Support</th>
                        <th>High Risk Pregnancy</th>
                        <th>Vaginal Birth</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    {% if user.maternity_info %}
                    <tr data-id="{{ user._id }}">
                        <td>{{ user.demographics_form1.user_id }}</td>
                        <td>{{ user.maternity_info.rehosp }}</td>
                        <td>{{ user.maternity_info.reasonforhosp }}</td>
                        <td>{{ user.maternity_info.date_of_rehosp }}</td>
                        <td>{{ user.maternity_info.doula }}</td>
                        <td>{{ user.maternity_info.highriskpreg }}</td>
                        <td>{{ user.maternity_info.vaginalbirth }}</td>
                        <td>
                            <button class="edit-button" data-id="{{ user._id }}" onclick="openEditForm2(this)">Edit</button>
                            <button class="delete-button" onclick="openDeleteModal('{{ user._id }}')">Delete</button>
                        </td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <h2>Infants Details Table</h2>
        <div class="table-container">
            <table class="infant_table" id="infantTable">
                <thead>
                    <tr>
                        <th>User ID</th>
                        <th>Infant Name</th>
                        <th>Birth Date</th>
                        <th>Birth Weight</th>
                        <th>Weeks at Delivery</th>
                        <th>Healthy Delivery</th>
                        <th>Rehospitalization</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    {% if user.infant_data %}
                    <tr data-id="{{ user._id }}">
                        <td>{{ user.demographics_form1.user_id }}</td>
                        <td>{{ user.infant_data.infant_name }}</td>
                        <td>{{ user.infant_data.birthdate }}</td>
                        <td>{{ user.infant_data.birth_weight }}</td>
                        <td>{{ user.infant_data.weeks_at_delivery }}</td>
                        <td>{{ user.infant_data.healthy_delivery }}</td>
                        <td>{{ user.infant_data.rehospitalization }}</td>
                        <td>
                            <button class="edit-button" data-id="{{ user._id }}" onclick="openEditInfantForm(this)">Edit</button>
                            <button class="delete-button" onclick="openDeleteModal('{{ user._id }}')">Delete</button>
                        </td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <h2>Children Details Table</h2>
        <div class="table-container">
            <table class="child_table" id="childTable">
                <thead>
                    <tr>
                        <th>User ID</th>
                        <th>Child Name</th>
                        <th>Birth Date</th>
                        <th>Age</th>
                        <th>Grade Level</th>
                        <th>Trauma Programming Hours</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    {% if user.child_demo_data %}
                    <tr data-id="{{ user._id }}">
                        <td>{{ user.demographics_form1.user_id }}</td>
                        <td>{{ user.child_demo_data.child_name }}</td>
                        <td>{{ user.child_demo_data.birthdate }}</td>
                        <td>{{ user.child_demo_data.age }}</td>
                        <td>{{ user.child_demo_data.grade_level }}</td>
                        <td>{{ user.child_demo_data.trauma_programming_hours }}</td>
                        <td>
                            <button class="edit-button" data-id="{{ user._id }}" onclick="openEditChildForm(this)">Edit</button>
                            <button class="delete-button" onclick="openDeleteModal('{{ user._id }}')">Delete</button>
                        </td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <h2>Exit Information Table</h2>
<div class="table-container">
    <table class="exit_table" id="exitTable">
        <thead>
            <tr>
                <th>User ID</th>
                <th>Length of Stay in Shelter</th>
                <th>Reason for Leaving Shelter</th>
                <th>Where Did You Go?</th>
                <th>Date of Exit from Shelter</th>
                <th>Moved to Transitional Housing</th>
                <th>Reason for Choosing Community Housing</th>
                <th>Address of Chosen Community Housing</th>
                <th>Length of Stay in Transitional Housing</th>
                <th>Housing Voucher Recipient</th>
                <th>Case Management Assistance</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            {% if user.exit_info %}
            <tr data-id="{{ user._id }}">
                <td>{{ user.demographics_form1.user_id }}</td>
                <td>{{ user.exit_info.length_stay_shelter }}</td>
                <td>{{ user.exit_info.reason_leaving_shelter }}</td>
                <td>{{ user.exit_info.wheredidugo }}</td>
                <td>{{ user.exit_info.doe_from_maternity_shelter }}</td>
                <td>{{ user.exit_info.moved_to_transitional_housing }}</td>
                <td>{{ user.exit_info.housingreason }}</td>
                <td>{{ user.exit_info.commnityhousingaddr }}</td>
                <td>{{ user.exit_info.length_stay_transitional_housing }}</td>
                <td>{{ user.exit_info.housing_voucher_recipient }}</td>
                <td>{{ user.exit_info.case_management_assistance }}</td>
                <td>
                    <button class="edit-button" data-id="{{ user._id }}" onclick="openEditExitForm(this)">Edit</button>
                    <button class="delete-button" onclick="openDeleteModal('{{ user._id }}')">Delete</button>
                </td>
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
    </table>
</div>


        <h2>Women Served Details</h2>
        <div class="table-container">
            <table class="women_served_table" id="womenServedTable">
                <thead>
                    <tr>
                        <th>Number of Women Accepted at Intake</th>
                        <th>Incoming Calls for Shelter</th>
                        <th>Number of Calls Seeking Shelter for Women</th>
                        <th>Number of Calls Seeking Shelter for Pregnant Women</th>
                        <th>Number of Pregnant Women Turned Away</th>
                        <th>Reason for Turning Away Pregnant Women</th>
                        <th>Number of Women and Children Touched During Community Outreach</th>
                        <th>Number of Referrals to Other Shelters or Agencies</th>
                        <th>Number of Women Moved from Maternity Shelter to Transitional Apartments</th>
                        <th>Number of Women Moved to Aftercare Program</th>
                        <th>Details of Aftercare Program</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in women_served_details %}
                    <tr>
                        <td>{{ user.women_accepted_intake }}</td>
                        <td>{{ user.incoming_calls_shelter }}</td>
                        <td>{{ user.calls_seeking_shelter_women }}</td>
                        <td>{{ user.calls_seeking_shelter_pregnant }}</td>
                        <td>{{ user.pregnant_women_turned_away }}</td>
                        <td>{{ user.pregnant_women_turned_away_reason }}</td>
                        <td>{{ user.community_outreach_activities }}</td>
                        <td>{{ user.referrals_other_agencies }}</td>
                        <td>{{ user.moved_from_maternity_to_apartments }}</td>
                        <td>{{ user.moved_to_aftercare_program }}</td>
                        <td>{{ user.aftercare_program_details }}</td>
                        <td>
                            <button class="edit-button" data-id="{{ user._id }}" onclick="openEditWomenServedForm(this)">Edit</button>
                            <button class="delete-button" onclick="openDeleteModal('{{ user._id }}')">Delete</button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <button class="back-to-form-button" onclick="location.href='/';">Back to Form</button>
    </div>

    <!-- Edit Form Modal -->
    <!-- Edit Form Modal -->
<div id="editFormModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeEditForm()">&times;</span>
        <h2>Edit Client Details</h2>
        <form id="editForm">
            <input type="hidden" id="editClientId">
            <label for="editDateOfEntry">Date of Entry:</label>
            <input type="date" id="editDateOfEntry" name="date_of_entry" required><br>
            <label for="editDateOfExit">Date of Exit:</label>
            <input type="date" id="editDateOfExit" name="date_of_exit"><br>
            <label for="editName">Name:</label>
            <input type="text" id="editName" name="name" required><br>
            <label for="editAddress">Address:</label>
            <input type="text" id="editAddress" name="address" required><br>
            <label for="editZip">Zip Code:</label>
            <input type="text" id="editZip" name="zip" required><br>
            <label for="editPhone">Phone:</label>
            <input type="text" id="editPhone" name="phone" required><br>
            <label for="editBirthdate">Birthdate:</label>
            <input type="date" id="editBirthdate" name="birthdate"><br>
            <label for="editAge">Age:</label>
            <input type="number" id="editAge" name="age" required><br>
            <label for="editSex">Sex:</label>
            <select id="editSex" name="sex" required>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select><br>
            <label for="editRace">Race:</label>
            <select id="editRace" name="race">
                <option value="">Select Race</option>
                <option value="american_indian_or_alaska_native">American Indian or Alaska Native</option>
                <option value="asian">Asian</option>
                <option value="black_or_african_american">Black or African American</option>
                <option value="native_hawaiian_or_other_pacific_islander">Native Hawaiian or Other Pacific Islander</option>
                <option value="white">White</option>
                <option value="two_or_more_races">Two or More Races</option>
                <option value="prefer_not_to_answer">Prefer Not to Answer</option>
            </select><br>
            <label for="editEthnicity">Ethnicity:</label>
            <select id="editEthnicity" name="ethnicity">
                <option value="">Select Ethnicity</option>
                <option value="hispanic_or_latino">Hispanic or Latino</option>
                <option value="not_hispanic_or_latino">Not Hispanic or Latino</option>
                <option value="prefer_not_to_answer">Prefer Not to Answer</option>
            </select><br>
            <label for="editMaritalStatus">Marital Status:</label>
            <select id="editMaritalStatus" name="marital_status">
                <option value="single">Single</option>
                <option value="married">Married</option>
                <option value="divorced">Divorced</option>
                <option value="widowed">Widowed</option>
                <option value="separated">Separated</option>
            </select><br>
            <label for="editLengthStayPreviousAddress">Length of Stay at Previous Address:</label>
            <input type="text" id="editLengthStayPreviousAddress" name="length_stay_previous_address"><br>
            <label for="editCountryOfOrigin">Country of Origin:</label>
            <select id="editCountryOfOrigin" name="country_of_origin">
              <!-- Country options -->
              <option value="Afghanistan">Afghanistan</option>
              <option value="Åland Islands">Åland Islands</option>
              <option value="Albania">Albania</option>
              <option value="Algeria">Algeria</option>
              <option value="American Samoa">American Samoa</option>
              <option value="Andorra">Andorra</option>
              <option value="Angola">Angola</option>
              <option value="Anguilla">Anguilla</option>
              <option value="Antarctica">Antarctica</option>
              <option value="Antigua and Barbuda">Antigua and Barbuda</option>
              <option value="Argentina">Argentina</option>
              <option value="Armenia">Armenia</option>
              <option value="Aruba">Aruba</option>
              <option value="Australia">Australia</option>
              <option value="Austria">Austria</option>
              <option value="Azerbaijan">Azerbaijan</option>
              <option value="Bahamas">Bahamas</option>
              <option value="Bahrain">Bahrain</option>
              <option value="Bangladesh">Bangladesh</option>
              <option value="Barbados">Barbados</option>
              <option value="Belarus">Belarus</option>
              <option value="Belgium">Belgium</option>
              <option value="Belize">Belize</option>
              <option value="Benin">Benin</option>
              <option value="Bermuda">Bermuda</option>
              <option value="Bhutan">Bhutan</option>
              <option value="Bolivia">Bolivia</option>
              <option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
              <option value="Botswana">Botswana</option>
              <option value="Bouvet Island">Bouvet Island</option>
              <option value="Brazil">Brazil</option>
              <option value="British Indian Ocean Territory">British Indian Ocean Territory</option>
              <option value="Brunei Darussalam">Brunei Darussalam</option>
              <option value="Bulgaria">Bulgaria</option>
              <option value="Burkina Faso">Burkina Faso</option>
              <option value="Burundi">Burundi</option>
              <option value="Cambodia">Cambodia</option>
              <option value="Cameroon">Cameroon</option>
              <option value="Canada">Canada</option>
              <option value="Cape Verde">Cape Verde</option>
              <option value="Cayman Islands">Cayman Islands</option>
              <option value="Central African Republic">Central African Republic</option>
              <option value="Chad">Chad</option>
              <option value="Chile">Chile</option>
              <option value="China">China</option>
              <option value="Christmas Island">Christmas Island</option>
              <option value="Cocos (Keeling) Islands">Cocos (Keeling) Islands</option>
              <option value="Colombia">Colombia</option>
              <option value="Comoros">Comoros</option>
              <option value="Congo">Congo</option>
              <option value="Congo, The Democratic Republic of The">Congo, The Democratic Republic of The</option>
              <option value="Cook Islands">Cook Islands</option>
              <option value="Costa Rica">Costa Rica</option>
              <option value="Cote D'ivoire">Cote D'ivoire</option>
              <option value="Croatia">Croatia</option>
              <option value="Cuba">Cuba</option>
              <option value="Cyprus">Cyprus</option>
              <option value="Czech Republic">Czech Republic</option>
              <option value="Denmark">Denmark</option>
              <option value="Djibouti">Djibouti</option>
              <option value="Dominica">Dominica</option>
              <option value="Dominican Republic">Dominican Republic</option>
              <option value="Ecuador">Ecuador</option>
              <option value="Egypt">Egypt</option>
              <option value="El Salvador">El Salvador</option>
              <option value="Equatorial Guinea">Equatorial Guinea</option>
              <option value="Eritrea">Eritrea</option>
              <option value="Estonia">Estonia</option>
              <option value="Ethiopia">Ethiopia</option>
              <option value="Falkland Islands (Malvinas)">Falkland Islands (Malvinas)</option>
              <option value="Faroe Islands">Faroe Islands</option>
              <option value="Fiji">Fiji</option>
              <option value="Finland">Finland</option>
              <option value="France">France</option>
              <option value="French Guiana">French Guiana</option>
              <option value="French Polynesia">French Polynesia</option>
              <option value="French Southern Territories">French Southern Territories</option>
              <option value="Gabon">Gabon</option>
              <option value="Gambia">Gambia</option>
              <option value="Georgia">Georgia</option>
              <option value="Germany">Germany</option>
              <option value="Ghana">Ghana</option>
              <option value="Gibraltar">Gibraltar</option>
              <option value="Greece">Greece</option>
              <option value="Greenland">Greenland</option>
              <option value="Grenada">Grenada</option>
              <option value="Guadeloupe">Guadeloupe</option>
              <option value="Guam">Guam</option>
              <option value="Guatemala">Guatemala</option>
              <option value="Guernsey">Guernsey</option>
              <option value="Guinea">Guinea</option>
              <option value="Guinea-bissau">Guinea-bissau</option>
              <option value="Guyana">Guyana</option>
              <option value="Haiti">Haiti</option>
              <option value="Heard Island and Mcdonald Islands">Heard Island and Mcdonald Islands</option>
              <option value="Holy See (Vatican City State)">Holy See (Vatican City State)</option>
              <option value="Honduras">Honduras</option>
              <option value="Hong Kong">Hong Kong</option>
              <option value="Hungary">Hungary</option>
              <option value="Iceland">Iceland</option>
              <option value="India">India</option>
              <option value="Indonesia">Indonesia</option>
              <option value="Iran, Islamic Republic of">Iran, Islamic Republic of</option>
              <option value="Iraq">Iraq</option>
              <option value="Ireland">Ireland</option>
              <option value="Isle of Man">Isle of Man</option>
              <option value="Israel">Israel</option>
              <option value="Italy">Italy</option>
              <option value="Jamaica">Jamaica</option>
              <option value="Japan">Japan</option>
              <option value="Jersey">Jersey</option>
              <option value="Jordan">Jordan</option>
              <option value="Kazakhstan">Kazakhstan</option>
              <option value="Kenya">Kenya</option>
              <option value="Kiribati">Kiribati</option>
              <option value="Korea, Democratic People's Republic of">Korea, Democratic People's Republic of</option>
              <option value="Korea, Republic of">Korea, Republic of</option>
              <option value="Kuwait">Kuwait</option>
              <option value="Kyrgyzstan">Kyrgyzstan</option>
              <option value="Lao People's Democratic Republic">Lao People's Democratic Republic</option>
              <option value="Latvia">Latvia</option>
              <option value="Lebanon">Lebanon</option>
              <option value="Lesotho">Lesotho</option>
              <option value="Liberia">Liberia</option>
              <option value="Libyan Arab Jamahiriya">Libyan Arab Jamahiriya</option>
              <option value="Liechtenstein">Liechtenstein</option>
              <option value="Lithuania">Lithuania</option>
              <option value="Luxembourg">Luxembourg</option>
              <option value="Macao">Macao</option>
              <option value="Macedonia, The Former Yugoslav Republic of">Macedonia, The Former Yugoslav Republic of</option>
              <option value="Madagascar">Madagascar</option>
              <option value="Malawi">Malawi</option>
              <option value="Malaysia">Malaysia</option>
              <option value="Maldives">Maldives</option>
              <option value="Mali">Mali</option>
              <option value="Malta">Malta</option>
              <option value="Marshall Islands">Marshall Islands</option>
              <option value="Martinique">Martinique</option>
              <option value="Mauritania">Mauritania</option>
              <option value="Mauritius">Mauritius</option>
              <option value="Mayotte">Mayotte</option>
              <option value="Mexico">Mexico</option>
              <option value="Micronesia, Federated States of">Micronesia, Federated States of</option>
              <option value="Moldova, Republic of">Moldova, Republic of</option>
              <option value="Monaco">Monaco</option>
              <option value="Mongolia">Mongolia</option>
              <option value="Montenegro">Montenegro</option>
              <option value="Montserrat">Montserrat</option>
              <option value="Morocco">Morocco</option>
              <option value="Mozambique">Mozambique</option>
              <option value="Myanmar">Myanmar</option>
              <option value="Namibia">Namibia</option>
              <option value="Nauru">Nauru</option>
              <option value="Nepal">Nepal</option>
              <option value="Netherlands">Netherlands</option>
              <option value="Netherlands Antilles">Netherlands Antilles</option>
              <option value="New Caledonia">New Caledonia</option>
              <option value="New Zealand">New Zealand</option>
              <option value="Nicaragua">Nicaragua</option>
              <option value="Niger">Niger</option>
              <option value="Nigeria">Nigeria</option>
              <option value="Niue">Niue</option>
              <option value="Norfolk Island">Norfolk Island</option>
              <option value="Northern Mariana Islands">Northern Mariana Islands</option>
              <option value="Norway">Norway</option>
              <option value="Oman">Oman</option>
              <option value="Pakistan">Pakistan</option>
              <option value="Palau">Palau</option>
              <option value="Palestinian Territory, Occupied">Palestinian Territory, Occupied</option>
              <option value="Panama">Panama</option>
              <option value="Papua New Guinea">Papua New Guinea</option>
              <option value="Paraguay">Paraguay</option>
              <option value="Peru">Peru</option>
              <option value="Philippines">Philippines</option>
              <option value="Pitcairn">Pitcairn</option>
              <option value="Poland">Poland</option>
              <option value="Portugal">Portugal</option>
              <option value="Puerto Rico">Puerto Rico</option>
              <option value="Qatar">Qatar</option>
              <option value="Reunion">Reunion</option>
              <option value="Romania">Romania</option>
              <option value="Russian Federation">Russian Federation</option>
              <option value="Rwanda">Rwanda</option>
              <option value="Saint Helena">Saint Helena</option>
              <option value="Saint Kitts and Nevis">Saint Kitts and Nevis</option>
              <option value="Saint Lucia">Saint Lucia</option>
              <option value="Saint Pierre and Miquelon">Saint Pierre and Miquelon</option>
              <option value="Saint Vincent and The Grenadines">Saint Vincent and The Grenadines</option>
              <option value="Samoa">Samoa</option>
              <option value="San Marino">San Marino</option>
              <option value="Sao Tome and Principe">Sao Tome and Principe</option>
              <option value="Saudi Arabia">Saudi Arabia</option>
              <option value="Senegal">Senegal</option>
              <option value="Serbia">Serbia</option>
              <option value="Seychelles">Seychelles</option>
              <option value="Sierra Leone">Sierra Leone</option>
              <option value="Singapore">Singapore</option>
              <option value="Slovakia">Slovakia</option>
              <option value="Slovenia">Slovenia</option>
              <option value="Solomon Islands">Solomon Islands</option>
              <option value="Somalia">Somalia</option>
              <option value="South Africa">South Africa</option>
              <option value="South Georgia and The South Sandwich Islands">South Georgia and The South Sandwich Islands</option>
              <option value="Spain">Spain</option>
              <option value="Sri Lanka">Sri Lanka</option>
              <option value="Sudan">Sudan</option>
              <option value="Suriname">Suriname</option>
              <option value="Svalbard and Jan Mayen">Svalbard and Jan Mayen</option>
              <option value="Swaziland">Swaziland</option>
              <option value="Sweden">Sweden</option>
              <option value="Switzerland">Switzerland</option>
              <option value="Syrian Arab Republic">Syrian Arab Republic</option>
              <option value="Taiwan">Taiwan</option>
              <option value="Tajikistan">Tajikistan</option>
              <option value="Tanzania, United Republic of">Tanzania, United Republic of</option>
              <option value="Thailand">Thailand</option>
              <option value="Timor-leste">Timor-leste</option>
              <option value="Togo">Togo</option>
              <option value="Tokelau">Tokelau</option>
              <option value="Tonga">Tonga</option>
              <option value="Trinidad and Tobago">Trinidad and Tobago</option>
              <option value="Tunisia">Tunisia</option>
              <option value="Turkey">Turkey</option>
              <option value="Turkmenistan">Turkmenistan</option>
              <option value="Turks and Caicos Islands">Turks and Caicos Islands</option>
              <option value="Tuvalu">Tuvalu</option>
              <option value="Uganda">Uganda</option>
              <option value="Ukraine">Ukraine</option>
              <option value="United Arab Emirates">United Arab Emirates</option>
              <option value="United Kingdom">United Kingdom</option>
              <option value="United States">United States</option>
              <option value="United States Minor Outlying Islands">United States Minor Outlying Islands</option>
              <option value="Uruguay">Uruguay</option>
              <option value="Uzbekistan">Uzbekistan</option>
              <option value="Vanuatu">Vanuatu</option>
              <option value="Venezuela">Venezuela</option>
              <option value="Viet Nam">Viet Nam</option>
              <option value="Virgin Islands, British">Virgin Islands, British</option>
              <option value="Virgin Islands, U.S.">Virgin Islands, U.S.</option>
              <option value="Wallis and Futuna">Wallis and Futuna</option>
              <option value="Western Sahara">Western Sahara</option>
              <option value="Yemen">Yemen</option>
              <option value="Zambia">Zambia</option>
              <option value="Zimbabwe">Zimbabwe</option>
            </select><br>
            <label for="editTimesInShelter">Times in Shelter:</label>
            <input type="number" id="editTimesInShelter" name="times_in_shelter"><br>
            <label for="editLengthStayPreviousShelter">Length of Stay at Previous Shelter:</label>
            <select id="editLengthStayPreviousShelter" name="length_stay_previous_shelter">
                <option value="less_than_30_days">Less than 30 days</option>
                <option value="1-6_months">1-6 months</option>
                <option value="6-12_months">6-12 months</option>
                <option value="greater_than_12_months">Greater than 12 months</option>
            </select><br>
            <label for="editNumberOfChildren">Number of Children:</label>
            <input type="number" id="editNumberOfChildren" name="number_of_children"><br>
            <label for="editEducationLevel">Education Level:</label>
            <input type="text" id="editEducationLevel" name="education_level"><br>
            <label for="editEmploymentStatus">Employment Status:</label>
            <select id="editEmploymentStatus" name="employment_status">
                <option value="employed">Employed</option>
                <option value="unemployed">Unemployed</option>
                <option value="student">Student</option>
                <option value="retired">Retired</option>
                <option value="disabled">Disabled</option>
                <option value="other">Other</option>
            </select><br>
            <label for="editIncomeAmountIntake">Income Amount at Intake:</label>
            <input type="number" id="editIncomeAmountIntake" name="income_amount_intake"><br>
            <label for="editIncomeSourceIntake">Income Source at Intake:</label>
            <input type="text" id="editIncomeSourceIntake" name="income_source_intake"><br>
            <label for="editIncomeAmountExit">Income Amount at Exit:</label>
            <input type="number" id="editIncomeAmountExit" name="income_amount_exit"><br>
            <label for="editIncome1YearExit">Income 1 Year from Exit:</label>
            <input type="number" id="editIncome1YearExit" name="income_1_year_exit"><br>
            <label for="editWeeksPregnant">Weeks Pregnant:</label>
            <input type="number" id="editWeeksPregnant" name="weeks_pregnant"><br>
            <label for="editPrenatalCarePriorIntake">Prenatal Care Prior to Intake:</label>
            <select id="editPrenatalCarePriorIntake" name="prenatal_care_prior_intake">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select><br>
            <label for="editFatherInvolvement">Father Involvement:</label>
            <select id="editFatherInvolvement" name="father_involvement">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select><br>
            <label for="editFatherEducationLevel">Father's Education Level:</label>
            <input type="text" id="editFatherEducationLevel" name="father_education_level"><br>
            <label for="editFatherOccupation">Father's Occupation:</label>
            <input type="text" id="editFatherOccupation" name="father_occupation"><br>
            <label for="editFatherIncome">Father's Income:</label>
            <input type="number" id="editFatherIncome" name="father_income"><br>
            <label for="editDomesticViolenceSurvivor">Domestic Violence Survivor:</label>
            <select id="editDomesticViolenceSurvivor" name="domestic_violence_survivor">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select><br>
            <label for="editVeteranStatus">Veteran Status:</label>
            <select id="editVeteranStatus" name="veteran_status">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select><br>
            <label for="editHighBP">High BP:</label>
            <select id="editHighBP" name="highbp">
                <option value="hypertension">Hypertension</option>
                <option value="preeclampsia">Preeclampsia</option>
                <option value="gestational_hypertension">Gestational Hypertension</option>
            </select><br>
            <label for="editDiabetes">Diabetes:</label>
            <select id="editDiabetes" name="diabetes" onchange="toggleInput(this, document.getElementById('editDiabetesContainer'))">
                <option value="no">No</option>
                <option value="yes">Yes</option>
            </select><br>
            <div id="editDiabetesContainer" style="display: none;">
                <label for="editTypeOfDiabetes">Select your Diabetes Type:</label>
                <select id="editTypeOfDiabetes" name="typeofdiabetes">
                    <option value="normal diabetes">Normal Diabetes</option>
                    <option value="gestational diabetes">Gestational Diabetes</option>
                </select><br>
            </div>
            <label for="editHeartDisease">Heart Disease:</label>
            <select id="editHeartDisease" name="heartdisease">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select><br>
            <label for="editLiveBirths">Live Births:</label>
            <input type="number" id="editLiveBirths" name="livebirths"><br>
            <label for="editMiscarriages">Miscarriages:</label>
            <input type="number" id="editMiscarriages" name="miscarriages"><br>
            <label for="editDisabilityDiagnosis">Disability Diagnosis:</label>
            <input type="text" id="editDisabilityDiagnosis" name="diagdisabilty"><br>
            <button type="button" onclick="submitEditForm()">Save Changes</button>
        </form>
    </div>
</div>


<    <!-- Modal for Editing Maternal Information -->
<div id="editFormModal2" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeEditForm2()">&times;</span>
        <h2>Edit Maternal Information</h2>
        <form id="editForm2">
            <input type="hidden" id="editClientId2">
            
            <label for="editRehosp">Rehospitalization:</label>
            <select id="editRehosp" name="rehosp" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" onchange="toggleInput(this, document.getElementById('editRehospContainer'))">
                <option value="no">No</option>
                <option value="yes">Yes</option>
            </select><br>
            
            <div id="editRehospContainer" style="display: none;">
                <label for="editReasonForHosp">Reason for your Hospitalisation:</label>
                <input type="text" id="editReasonForHosp" name="reasonforhospitalisation" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"><br>
                <label for="editDateOfRehosp">Date of Rehospitalisation:</label>
                <input type="date" id="editDateOfRehosp" name="date_of_rehosp" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"><br>
            </div>
            
            <label for="editDoula">Doula Support:</label>
            <select id="editDoula" name="doula" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select><br>
            
            <label for="editHighRiskPreg">High Risk Pregnancy:</label>
            <select id="editHighRiskPreg" name="highriskpreg" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select><br>
            
            <label for="editVaginalBirth">Vaginal Birth:</label>
            <select id="editVaginalBirth" name="vaginalbirth" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select><br>
            
            <button type="button" onclick="submitEditForm2()">Save Changes</button>
        </form>
    </div>
</div>
    <!-- Modal for Editing Children Details -->
    <div id="editChildFormModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditChildForm()">&times;</span>
            <h2>Edit Children Details</h2>
            <form id="editChildForm">
                <input type="hidden" id="editChildId">
                <label for="editChildName">Child Name:</label>
                <input type="text" id="editChildName" name="child_name"><br>
                <label for="editChildBirthdate">Birth Date:</label>
                <input type="date" id="editChildBirthdate" name="birthdate"><br>
                <label for="editChildAge">Age:</label>
                <input type="number" id="editChildAge" name="age"><br>
                <label for="editChildGradeLevel">Grade Level:</label>
                <input type="text" id="editChildGradeLevel" name="grade_level"><br>
                <label for="editChildTraumaHours">Trauma Programming Hours:</label>
                <input type="number" id="editChildTraumaHours" name="trauma_programming_hours"><br>
                <button type="button" onclick="submitEditChildForm()">Save Changes</button>
            </form>
        </div>
    </div>

<!-- Modal for Editing Exit Information -->
<div id="editExitFormModal" class="modal hidden fixed z-50 inset-0 overflow-y-auto">
    <div class="modal-content bg-white rounded-lg p-6 mx-auto mt-20 shadow-lg">
        <span class="close text-gray-600 hover:text-gray-800 cursor-pointer" onclick="closeEditExitForm()">&times;</span>
        <h2 class="text-xl font-bold mb-4">Edit Exit Information</h2>
        <form id="editExitForm" method="POST" action="/submit_edit_exit_info">
            <input type="hidden" id="editExitId" name="user_id">

            <label for="editLengthStayShelter" class="block text-sm font-medium text-gray-700">Length of Stay in Shelter:</label>
            <select id="editLengthStayShelter" name="length_stay_shelter" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                <option value="" disabled selected>Select an option</option>
                <option value="less_than_30_days">Less than 30 days</option>
                <option value="1-6_months">1-6 months</option>
                <option value="6-12_months">6-12 months</option>
                <option value="12-24_months">12-24 months</option>
                <option value="greater_than_24_months">>24 months</option>
            </select><br>

            <label for="editReasonLeavingShelter" class="block text-sm font-medium text-gray-700">Reason for Leaving Shelter:</label>
            <input type="text" id="editReasonLeavingShelter" name="reason_leaving_shelter" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"><br>

            <label for="editWhereDidYouGo" class="block text-sm font-medium text-gray-700">Where Did You Go?</label>
            <select id="editWhereDidYouGo" name="wheredidugo" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                <option value="">Select...</option>
                <option value="transitional_housing">Transitional Housing</option>
                <option value="family_housing">Family Housing</option>
                <option value="unhoused">Unhoused</option>
            </select><br>

            <label for="editDateOfExit" class="block text-sm font-medium text-gray-700">Date of Exit from Shelter:</label>
            <input type="date" id="editDateOfExit" name="doe_from_maternity_shelter" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"><br>

            <label for="editMovedToTransitionalHousing" class="block text-sm font-medium text-gray-700">Moved to Transitional Housing:</label>
            <select id="editMovedToTransitionalHousing" name="moved_to_transitional_housing" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                <option value="">Select...</option>
                <option value="transitional_housing">Transitional Housing</option>
                <option value="community_housing">Community Housing</option>
            </select><br>

            <label for="editHousingReason" class="block text-sm font-medium text-gray-700">Reason for Choosing Community Housing:</label>
            <input type="text" id="editHousingReason" name="housingreason" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"><br>

            <label for="editCommunityHousingAddress" class="block text-sm font-medium text-gray-700">Address of Chosen Community Housing:</label>
            <input type="text" id="editCommunityHousingAddress" name="commnityhousingaddr" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"><br>

            <label for="editLengthStayTransitionalHousing" class="block text-sm font-medium text-gray-700">Length of Stay in Transitional Housing:</label>
            <select id="editLengthStayTransitionalHousing" name="length_stay_transitional_housing" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                <option value="" disabled selected>Select an option</option>
                <option value="less_than_30_days">Less than 30 days</option>
                <option value="1-6_months">1-6 months</option>
                <option value="6-12_months">6-12 months</option>
                <option value="12-24_months">12-24 months</option>
                <option value="greater_than_24_months">>24 months</option>
            </select><br>

            <label for="editHousingVoucherRecipient" class="block text-sm font-medium text-gray-700">Housing Voucher Recipient:</label>
            <select id="editHousingVoucherRecipient" name="housing_voucher_recipient" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                <option value="">Select...</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select><br>

            <label for="editCaseManagementAssistance" class="block text-sm font-medium text-gray-700">Case Management Assistance:</label>
            <select id="editCaseManagementAssistance" name="case_management_assistance" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                <option value="">Select...</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select><br>

            <button type="submit" class="w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Save Changes</button>
        </form>
    </div>
</div>




    <!-- Modal for Editing Women Served Details -->
    <div id="editWomenServedFormModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditWomenServedForm()">&times;</span>
            <h2>Edit Women Served Details</h2>
            <form id="editWomenServedForm">
                <input type="hidden" id="editWomenServedId">
                <label for="editWomenAcceptedIntake">Number of Women Accepted at Intake:</label>
                <input type="number" id="editWomenAcceptedIntake" name="women_accepted_intake"><br>
                <label for="editIncomingCallsShelter">Incoming Calls for Shelter:</label>
                <input type="number" id="editIncomingCallsShelter" name="incoming_calls_shelter"><br>
                <label for="editCallsSeekingShelterWomen">Number of Calls Seeking Shelter for Women:</label>
                <input type="number" id="editCallsSeekingShelterWomen" name="calls_seeking_shelter_women"><br>
                <label for="editCallsSeekingShelterPregnant">Number of Calls Seeking Shelter for Pregnant Women:</label>
                <input type="number" id="editCallsSeekingShelterPregnant" name="calls_seeking_shelter_pregnant"><br>
                <label for="editPregnantWomenTurnedAway">Number of Pregnant Women Turned Away:</label>
                <input type="number" id="editPregnantWomenTurnedAway" name="pregnant_women_turned_away"><br>
                <label for="editPregnantWomenTurnedAwayReason">Reasons for Turning Away Pregnant Women:</label>
                <textarea id="editPregnantWomenTurnedAwayReason" name="pregnant_women_turned_away_reason"></textarea><br>
                <label for="editCommunityOutreachActivities">Number of Women and Children Touched During Community Outreach Activities:</label>
                <input type="number" id="editCommunityOutreachActivities" name="community_outreach_activities"><br>
                <label for="editReferralsOtherAgencies">Number of Referrals to Other Shelters or Social Service Agencies:</label>
                <input type="number" id="editReferralsOtherAgencies" name="referrals_other_agencies"><br>
                <label for="editMovedFromMaternityToApartments">Number of Women Moved from Maternity Shelter to Transitional Apartments:</label>
                <input type="number" id="editMovedFromMaternityToApartments" name="moved_from_maternity_to_apartments"><br>
                <label for="editMovedToAftercareProgram">Number of Women Moved to the AfterCare Program:</label>
                <input type="number" id="editMovedToAftercareProgram" name="moved_to_aftercare_program"><br>
                <button type="button" onclick="submitEditWomenServedForm()">Save Changes</button>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeDeleteModal()">&times;</span>
            <h2>Confirm Delete</h2>
            <p>Are you sure you want to delete this entry?</p>
            <button id="confirmDeleteButton" onclick="deleteClient()">Delete</button>
            <button onclick="closeDeleteModal()">Cancel</button>
        </div>
    </div>

    <script>
        function toggleInput(selectElement, containerElement) {
            if (selectElement.value === "yes") {
                containerElement.style.display = "block";
            } else {
                containerElement.style.display = "none";
            }
        }


        function searchTable() {
            var input, filter, table, tr, td, i, j, txtValue;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            tables = document.querySelectorAll("table.client-table, table.form2_table, table.child_table, table.infant_table, table.exit_table, table.women_served_table");

            tables.forEach(function(table) {
                tr = table.getElementsByTagName("tr");

                for (i = 1; i < tr.length; i++) {
                    tr[i].style.display = "none";

                    td = tr[i].getElementsByTagName("td");
                    for (j = 0; j < td.length; j++) {
                        if (td[j]) {
                            txtValue = td[j].textContent || td[j].innerText;
                            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                tr[i].style.display = "";
                                break;
                            }
                        }
                    }
                }
            });
        }

        // Function to open the delete confirmation modal
        function openDeleteModal(id) {
            var modal = document.getElementById("deleteModal");
            modal.style.display = "block";
            document.getElementById("confirmDeleteButton").setAttribute("data-id", id);
        }

        // Function to close the delete confirmation modal
        function closeDeleteModal() {
            var modal = document.getElementById("deleteModal");
            modal.style.display = "none";
        }
        
        // Function to open the edit form modal
        function openEditForm(button) {
            var clientId = button.getAttribute("data-id");
            var row = button.closest("tr");
            document.getElementById("editClientId").value = clientId;
            document.getElementById("editDateOfEntry").value = row.cells[1].textContent;
            document.getElementById("editDateOfExit").value = row.cells[2].textContent;
            document.getElementById("editName").value = row.cells[3].textContent;
            document.getElementById("editAddress").value = row.cells[4].textContent;
            document.getElementById("editZip").value = row.cells[5].textContent;
            document.getElementById("editPhone").value = row.cells[6].textContent;
            document.getElementById("editBirthdate").value = row.cells[7].textContent;
            document.getElementById("editAge").value = row.cells[8].textContent;
            document.getElementById("editSex").value = row.cells[9].textContent;
            document.getElementById("editRace").value = row.cells[10].textContent;
            document.getElementById("editEthnicity").value = row.cells[11].textContent;
            document.getElementById("editMaritalStatus").value = row.cells[12].textContent;
            document.getElementById("editLengthStayPreviousAddress").value = row.cells[13].textContent;
            document.getElementById("editCountryOfOrigin").value = row.cells[14].textContent;
            document.getElementById("editTimesInShelter").value = row.cells[15].textContent;
            document.getElementById("editLengthStayPreviousShelter").value = row.cells[16].textContent;
            document.getElementById("editNumberOfChildren").value = row.cells[17].textContent;
            document.getElementById("editEducationLevel").value = row.cells[19].textContent;
            document.getElementById("editEmploymentStatus").value = row.cells[20].textContent;
            document.getElementById("editIncomeAmountIntake").value = row.cells[21].textContent;
            document.getElementById("editIncomeSourceIntake").value = row.cells[22].textContent;
            document.getElementById("editIncomeAmountExit").value = row.cells[23].textContent;
            document.getElementById("editIncome1YearExit").value = row.cells[24].textContent;
            document.getElementById("editWeeksPregnant").value = row.cells[25].textContent;
            document.getElementById("editPrenatalCarePriorIntake").value = row.cells[26].textContent;
            document.getElementById("editFatherInvolvement").value = row.cells[27].textContent;
            document.getElementById("editFatherEducationLevel").value = row.cells[28].textContent;
            document.getElementById("editFatherOccupation").value = row.cells[29].textContent;
            document.getElementById("editFatherIncome").value = row.cells[30].textContent;
            document.getElementById("editDomesticViolenceSurvivor").value = row.cells[31].textContent;
            document.getElementById("editVeteranStatus").value = row.cells[32].textContent;
            document.getElementById("editHighBP").value = row.cells[33].textContent;
            document.getElementById("editDiabetes").value = row.cells[34].textContent;
            document.getElementById("editHeartDisease").value = row.cells[35].textContent;
            document.getElementById("editLiveBirths").value = row.cells[36].textContent;
            document.getElementById("editMiscarriages").value = row.cells[37].textContent;
            document.getElementById("editDisabilityDiagnosis").value = row.cells[38].textContent;

            document.getElementById("editFormModal").style.display = "block";
        }

        function closeEditForm() {
            document.getElementById("editFormModal").style.display = "none";
        }

        function submitEditForm() {
            var clientId = document.getElementById("editClientId").value;
            var formData = {
                date_of_entry: document.getElementById("editDateOfEntry").value,
                date_of_exit: document.getElementById("editDateOfExit").value,
                name: document.getElementById("editName").value,
                address: document.getElementById("editAddress").value,
                zip: document.getElementById("editZip").value,
                phone: document.getElementById("editPhone").value,
                birthdate: document.getElementById("editBirthdate").value,
                age: document.getElementById("editAge").value,
                sex: document.getElementById("editSex").value,
                race: document.getElementById("editRace").value,
                ethnicity: document.getElementById("editEthnicity").value,
                marital_status: document.getElementById("editMaritalStatus").value,
                length_stay_previous_address: document.getElementById("editLengthStayPreviousAddress").value,
                country_of_origin: document.getElementById("editCountryOfOrigin").value,
                times_in_shelter: document.getElementById("editTimesInShelter").value,
                length_stay_previous_shelter: document.getElementById("editLengthStayPreviousShelter").value,
                number_of_children: document.getElementById("editNumberOfChildren").value,
                education_level: document.getElementById("editEducationLevel").value,
                employment_status: document.getElementById("editEmploymentStatus").value,
                income_amount_intake: document.getElementById("editIncomeAmountIntake").value,
                income_source_intake: document.getElementById("editIncomeSourceIntake").value,
                income_amount_exit: document.getElementById("editIncomeAmountExit").value,
                income_1_year_exit: document.getElementById("editIncome1YearExit").value,
                weeks_pregnant: document.getElementById("editWeeksPregnant").value,
                prenatal_care_prior_intake: document.getElementById("editPrenatalCarePriorIntake").value,
                father_involvement: document.getElementById("editFatherInvolvement").value,
                father_education_level: document.getElementById("editFatherEducationLevel").value,
                father_occupation: document.getElementById("editFatherOccupation").value,
                father_income: document.getElementById("editFatherIncome").value,
                domestic_violence_survivor: document.getElementById("editDomesticViolenceSurvivor").value,
                veteran_status: document.getElementById("editVeteranStatus").value,
                highbp: document.getElementById("editHighBP").value,
                diabetes: document.getElementById("editDiabetes").value,
                heartdisease: document.getElementById("editHeartDisease").value,
                livebirths: document.getElementById("editLiveBirths").value,
                miscarriages: document.getElementById("editMiscarriages").value,
                diagdisabilty: document.getElementById("editDisabilityDiagnosis").value
            };
        
            // Handle empty optional fields
            Object.keys(formData).forEach(key => {
                if (formData[key] === "" || formData[key] === null) {
                    delete formData[key];
                }
            });
        
            fetch(`/edit_client/${clientId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData),
            })
            .then(response => response.json())
            .then(data => {
                if (data.message) {
                    var row = document.querySelector(`tr[data-id="${clientId}"]`);
                    row.cells[1].textContent = formData.date_of_entry || row.cells[1].textContent;
                    row.cells[2].textContent = formData.date_of_exit || row.cells[2].textContent;
                    row.cells[3].textContent = formData.name || row.cells[3].textContent;
                    row.cells[4].textContent = formData.address || row.cells[4].textContent;
                    row.cells[5].textContent = formData.zip || row.cells[5].textContent;
                    row.cells[6].textContent = formData.phone || row.cells[6].textContent;
                    row.cells[7].textContent = formData.birthdate || row.cells[7].textContent;
                    row.cells[8].textContent = formData.age || row.cells[8].textContent;
                    row.cells[9].textContent = formData.sex || row.cells[9].textContent;
                    row.cells[10].textContent = formData.race || row.cells[10].textContent;
                    row.cells[11].textContent = formData.ethnicity || row.cells[11].textContent;
                    row.cells[12].textContent = formData.marital_status || row.cells[12].textContent;
                    row.cells[13].textContent = formData.length_stay_previous_address || row.cells[13].textContent;
                    row.cells[14].textContent = formData.country_of_origin || row.cells[14].textContent;
                    row.cells[15].textContent = formData.times_in_shelter || row.cells[15].textContent;
                    row.cells[16].textContent = formData.length_stay_previous_shelter || row.cells[16].textContent;
                    row.cells[17].textContent = formData.number_of_children || row.cells[17].textContent;
                    row.cells[19].textContent = formData.education_level || row.cells[19].textContent;
                    row.cells[20].textContent = formData.employment_status || row.cells[20].textContent;
                    row.cells[21].textContent = formData.income_amount_intake || row.cells[21].textContent;
                    row.cells[22].textContent = formData.income_source_intake || row.cells[22].textContent;
                    row.cells[23].textContent = formData.income_amount_exit || row.cells[23].textContent;
                    row.cells[24].textContent = formData.income_1_year_exit || row.cells[24].textContent;
                    row.cells[25].textContent = formData.weeks_pregnant || row.cells[25].textContent;
                    row.cells[26].textContent = formData.prenatal_care_prior_intake || row.cells[26].textContent;
                    row.cells[27].textContent = formData.father_involvement || row.cells[27].textContent;
                    row.cells[28].textContent = formData.father_education_level || row.cells[28].textContent;
                    row.cells[29].textContent = formData.father_occupation || row.cells[29].textContent;
                    row.cells[30].textContent = formData.father_income || row.cells[30].textContent;
                    row.cells[31].textContent = formData.domestic_violence_survivor || row.cells[31].textContent;
                    row.cells[32].textContent = formData.veteran_status || row.cells[32].textContent;
                    row.cells[33].textContent = formData.highbp || row.cells[33].textContent;
                    row.cells[34].textContent = formData.diabetes || row.cells[34].textContent;
                    row.cells[35].textContent = formData.heartdisease || row.cells[35].textContent;
                    row.cells[36].textContent = formData.livebirths || row.cells[36].textContent;
                    row.cells[37].textContent = formData.miscarriages || row.cells[37].textContent;
                    row.cells[38].textContent = formData.diagdisabilty || row.cells[38].textContent;
        
                    closeEditForm();
                    console.log('Client updated successfully');
                } else {
                    console.error('Error updating client');
                }
            })
            .catch(error => console.error('Error:', error));
        }
        
        function openEditForm2(button) {
            var clientId = button.getAttribute("data-id");
            var row = button.closest("tr");
            document.getElementById("editClientId2").value = clientId;
            document.getElementById("editRehosp").value = row.cells[1].textContent;
            document.getElementById("editDoula").value = row.cells[2].textContent;
            document.getElementById("editHighRiskPreg").value = row.cells[3].textContent;
            document.getElementById("editVaginalBirth").value = row.cells[4].textContent;
            document.getElementById("editFormModal2").style.display = "block";
        }

        function closeEditForm2() {
            document.getElementById("editFormModal2").style.display = "none";
        }

        function submitEditForm2() {
            var clientId = document.getElementById("editClientId2").value;
            var formData = {
                rehosp: document.getElementById("editRehosp").value,
                doula: document.getElementById("editDoula").value,
                highriskpreg: document.getElementById("editHighRiskPreg").value,
                vaginalbirth: document.getElementById("editVaginalBirth").value
            };
        
            // Handle empty optional fields
            Object.keys(formData).forEach(key => {
                if (formData[key] === "" || formData[key] === null) {
                    delete formData[key];
                }
            });
        
            fetch(`/edit_maternal_info/${clientId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData),
            })
            .then(response => response.json())
            .then(data => {
                if (data.message) {
                    var row = document.querySelector(`tr[data-id="${clientId}"]`);
                    row.cells[1].textContent = formData.rehosp || row.cells[1].textContent;
                    row.cells[2].textContent = formData.doula || row.cells[2].textContent;
                    row.cells[3].textContent = formData.highriskpreg || row.cells[3].textContent;
                    row.cells[4].textContent = formData.vaginalbirth || row.cells[4].textContent;
                    closeEditForm2();
                    console.log('Maternal information updated successfully');
                } else {
                    console.error('Error updating maternal information');
                }
            })
            .catch(error => console.error('Error:', error));
        }

        function openEditInfantForm(button) {
            var clientId = button.getAttribute("data-id");
            var row = button.closest("tr");
            document.getElementById("editInfantId").value = clientId;
            document.getElementById("editInfantName").value = row.cells[1].textContent;
            document.getElementById("editInfantBirthdate").value = row.cells[2].textContent;
            document.getElementById("editInfantBirthWeight").value = row.cells[3].textContent;
            document.getElementById("editInfantWeeksAtDelivery").value = row.cells[4].textContent;
            document.getElementById("editInfantHealthyDelivery").value = row.cells[5].textContent;
            document.getElementById("editInfantRehospitalization").value = row.cells[6].textContent;
            document.getElementById("editInfantFormModal").style.display = "block";
        }

        function closeEditInfantForm() {
            document.getElementById("editInfantFormModal").style.display = "none";
        }

        function submitEditInfantForm() {
            var clientId = document.getElementById("editInfantId").value;
            var formData = {
                infant_name: document.getElementById("editInfantName").value,
                birthdate: document.getElementById("editInfantBirthdate").value,
                birth_weight: document.getElementById("editInfantBirthWeight").value,
                weeks_at_delivery: document.getElementById("editInfantWeeksAtDelivery").value,
                healthy_delivery: document.getElementById("editInfantHealthyDelivery").value,
                rehospitalization: document.getElementById("editInfantRehospitalization").value
            };
        
            // Handle empty optional fields
            Object.keys(formData).forEach(key => {
                if (formData[key] === "" || formData[key] === null) {
                    delete formData[key];
                }
            });
        
            fetch(`/edit_infant/${clientId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData),
            })
            .then(response => response.json())
            .then(data => {
                if (data.message) {
                    var row = document.querySelector(`tr[data-id="${clientId}"]`);
                    row.cells[1].textContent = formData.infant_name || row.cells[1].textContent;
                    row.cells[2].textContent = formData.birthdate || row.cells[2].textContent;
                    row.cells[3].textContent = formData.birth_weight || row.cells[3].textContent;
                    row.cells[4].textContent = formData.weeks_at_delivery || row.cells[4].textContent;
                    row.cells[5].textContent = formData.healthy_delivery || row.cells[5].textContent;
                    row.cells[6].textContent = formData.rehospitalization || row.cells[6].textContent;
                    closeEditInfantForm();
                    console.log('Infant details updated successfully');
                } else {
                    console.error('Error updating infant details');
                }
            })
            .catch(error => console.error('Error:', error));
        }

        function openEditChildForm(button) {
            var clientId = button.getAttribute("data-id");
            var row = button.closest("tr");
            document.getElementById("editChildId").value = clientId;
            document.getElementById("editChildName").value = row.cells[1].textContent;
            document.getElementById("editChildBirthdate").value = row.cells[2].textContent;
            document.getElementById("editChildAge").value = row.cells[3].textContent;
            document.getElementById("editChildGradeLevel").value = row.cells[4].textContent;
            document.getElementById("editChildTraumaHours").value = row.cells[5].textContent;
            document.getElementById("editChildFormModal").style.display = "block";
        }

        function closeEditChildForm() {
            document.getElementById("editChildFormModal").style.display = "none";
        }

        function submitEditChildForm() {
            var clientId = document.getElementById("editChildId").value;
            var formData = {
                child_name: document.getElementById("editChildName").value,
                birthdate: document.getElementById("editChildBirthdate").value,
                age: document.getElementById("editChildAge").value,
                grade_level: document.getElementById("editChildGradeLevel").value,
                trauma_programming_hours: document.getElementById("editChildTraumaHours").value
            };
        
            // Handle empty optional fields
            Object.keys(formData).forEach(key => {
                if (formData[key] === "" || formData[key] === null) {
                    delete formData[key];
                }
            });
        
            fetch(`/edit_child/${clientId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData),
            })
            .then(response => response.json())
            .then(data => {
                if (data.message) {
                    var row = document.querySelector(`tr[data-id="${clientId}"]`);
                    row.cells[1].textContent = formData.child_name || row.cells[1].textContent;
                    row.cells[2].textContent = formData.birthdate || row.cells[2].textContent;
                    row.cells[3].textContent = formData.age || row.cells[3].textContent;
                    row.cells[4].textContent = formData.grade_level || row.cells[4].textContent;
                    row.cells[5].textContent = formData.trauma_programming_hours || row.cells[5].textContent;
                    closeEditChildForm();
                    console.log('Child details updated successfully');
                } else {
                    console.error('Error updating child details');
                }
            })
            .catch(error => console.error('Error:', error));
        }

        function openEditExitForm(button) {
            var clientId = button.getAttribute("data-id");
            var row = button.closest("tr");
            document.getElementById("editExitId").value = clientId;
            document.getElementById("editLengthStayShelter").value = row.cells[1].textContent.trim();
            document.getElementById("editReasonLeavingShelter").value = row.cells[2].textContent.trim();
            document.getElementById("editDateOfExit").value = row.cells[4].textContent.trim();
            document.getElementById("editWhereDidYouGo").value = row.cells[3].textContent.trim();
            document.getElementById("editMovedToTransitionalHousing").value = row.cells[5].textContent.trim();
            document.getElementById("editHousingReason").value = row.cells[6].textContent.trim();
            document.getElementById("editCommunityHousingAddress").value = row.cells[7].textContent.trim();
            document.getElementById("editLengthStayTransitionalHousing").value = row.cells[8].textContent.trim();
            document.getElementById("editHousingVoucherRecipient").value = row.cells[9].textContent.trim();
            document.getElementById("editCaseManagementAssistance").value = row.cells[10].textContent.trim();
            document.getElementById("editExitFormModal").style.display = "block";
        }
        
        function closeEditExitForm() {
            document.getElementById("editExitFormModal").style.display = "none";
        }
        
        function submitEditExitForm() {
            var clientId = document.getElementById("editExitId").value;
            var formData = {
                length_stay_shelter: document.getElementById("editLengthStayShelter").value,
                reason_leaving_shelter: document.getElementById("editReasonLeavingShelter").value,
                wheredidugo: document.getElementById("editWhereDidYouGo").value,
                doe_from_maternity_shelter: document.getElementById("editDateOfExit").value,
                moved_to_transitional_housing: document.getElementById("editMovedToTransitionalHousing").value,
                housingreason: document.getElementById("editHousingReason").value,
                commnityhousingaddress: document.getElementById("editCommunityHousingAddress").value,
                length_stay_transitional_housing: document.getElementById("editLengthStayTransitionalHousing").value,
                housing_voucher_recipient: document.getElementById("editHousingVoucherRecipient").value,
                case_management_assistance: document.getElementById("editCaseManagementAssistance").value
            };
        
            // Handle empty optional fields
            Object.keys(formData).forEach(key => {
                if (formData[key] === "" || formData[key] === null) {
                    delete formData[key];
                }
            });
        
            fetch(`/edit_exit_info/${clientId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData),
            })
            .then(response => response.json())
            .then(data => {
                if (data.message) {
                    var row = document.querySelector(`tr[data-id="${clientId}"]`);
                    row.cells[1].textContent = formData.length_stay_shelter || row.cells[1].textContent;
                    row.cells[2].textContent = formData.reason_leaving_shelter || row.cells[2].textContent;
                    row.cells[3].textContent = formData.wheredidugo || row.cells[3].textContent;
                    row.cells[4].textContent = formData.doe_from_maternity_shelter || row.cells[4].textContent;
                    row.cells[5].textContent = formData.moved_to_transitional_housing || row.cells[5].textContent;
                    row.cells[6].textContent = formData.housingreason || row.cells[6].textContent;
                    row.cells[7].textContent = formData.commnityhousingaddress || row.cells[7].textContent;
                    row.cells[8].textContent = formData.length_stay_transitional_housing || row.cells[8].textContent;
                    row.cells[9].textContent = formData.housing_voucher_recipient || row.cells[9].textContent;
                    row.cells[10].textContent = formData.case_management_assistance || row.cells[10].textContent;
                    closeEditExitForm();
                    console.log('Exit information updated successfully');
                } else {
                    console.error('Error updating exit information');
                }
            })
            .catch(error => console.error('Error:', error));
        }
        

        function openEditWomenServedForm(button) {
            var clientId = button.getAttribute("data-id");
            var row = button.closest("tr");
            document.getElementById("editWomenServedId").value = clientId;
            document.getElementById("editWomenAcceptedIntake").value = row.cells[0].textContent;
            document.getElementById("editIncomingCallsShelter").value = row.cells[1].textContent;
            document.getElementById("editCallsSeekingShelterWomen").value = row.cells[2].textContent;
            document.getElementById("editCallsSeekingShelterPregnant").value = row.cells[3].textContent;
            document.getElementById("editPregnantWomenTurnedAway").value = row.cells[4].textContent;
            document.getElementById("editPregnantWomenTurnedAwayReason").value = row.cells[5].textContent;
            document.getElementById("editCommunityOutreachActivities").value = row.cells[6].textContent;
            document.getElementById("editReferralsOtherAgencies").value = row.cells[7].textContent;
            document.getElementById("editMovedFromMaternityToApartments").value = row.cells[8].textContent;
            document.getElementById("editMovedToAftercareProgram").value = row.cells[9].textContent;
            document.getElementById("editAftercareProgramDetails").value = row.cells[10].textContent;
            document.getElementById("editWomenServedFormModal").style.display = "block";
        }

        function closeEditWomenServedForm() {
            document.getElementById("editWomenServedFormModal").style.display = "none";
        }

        function submitEditWomenServedForm() {
            var clientId = document.getElementById("editWomenServedId").value;
            var formData = {
                women_accepted_intake: document.getElementById("editWomenAcceptedIntake").value,
                incoming_calls_shelter: document.getElementById("editIncomingCallsShelter").value,
                calls_seeking_shelter_women: document.getElementById("editCallsSeekingShelterWomen").value,
                calls_seeking_shelter_pregnant: document.getElementById("editCallsSeekingShelterPregnant").value,
                pregnant_women_turned_away: document.getElementById("editPregnantWomenTurnedAway").value,
                pregnant_women_turned_away_reason: document.getElementById("editPregnantWomenTurnedAwayReason").value,
                community_outreach_activities: document.getElementById("editCommunityOutreachActivities").value,
                referrals_other_agencies: document.getElementById("editReferralsOtherAgencies").value,
                moved_from_maternity_to_apartments: document.getElementById("editMovedFromMaternityToApartments").value,
                moved_to_aftercare_program: document.getElementById("editMovedToAftercareProgram").value
            };
        
            // Handle empty optional fields
            Object.keys(formData).forEach(key => {
                if (formData[key] === "" || formData[key] === null) {
                    delete formData[key];
                }
            });
        
            fetch(`/edit_women_served/${clientId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData),
            })
            .then(response => response.json())
            .then(data => {
                if (data.message) {
                    var row = document.querySelector(`tr[data-id="${clientId}"]`);
                    row.cells[0].textContent = formData.women_accepted_intake || row.cells[0].textContent;
                    row.cells[1].textContent = formData.incoming_calls_shelter || row.cells[1].textContent;
                    row.cells[2].textContent = formData.calls_seeking_shelter_women || row.cells[2].textContent;
                    row.cells[3].textContent = formData.calls_seeking_shelter_pregnant || row.cells[3].textContent;
                    row.cells[4].textContent = formData.pregnant_women_turned_away || row.cells[4].textContent;
                    row.cells[5].textContent = formData.pregnant_women_turned_away_reason || row.cells[5].textContent;
                    row.cells[6].textContent = formData.community_outreach_activities || row.cells[6].textContent;
                    row.cells[7].textContent = formData.referrals_other_agencies || row.cells[7].textContent;
                    row.cells[8].textContent = formData.moved_from_maternity_to_apartments || row.cells[8].textContent;
                    row.cells[9].textContent = formData.moved_to_aftercare_program || row.cells[9].textContent;
                    closeEditWomenServedForm();
                    console.log('Women served details updated successfully');
                } else {
                    console.error('Error updating women served details');
                }
            })
            .catch(error => console.error('Error:', error));
        }

        // Closing modals when clicking outside of them
        window.onclick = function(event) {
            var modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            });
        }
    </script>
</body>
</html>
